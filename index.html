<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>BetterBarcodes by Wrdlbrnft</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">BetterBarcodes</h1>
      <h2 class="project-tagline">The best way to read and display barcodes. </h2>
      <a href="https://github.com/Wrdlbrnft/BetterBarcodes" class="btn">View on GitHub</a>
      <a href="https://github.com/Wrdlbrnft/BetterBarcodes/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/Wrdlbrnft/BetterBarcodes/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <ul>
<li>
<strong>Works on API level 14 and above</strong>: That's 97% of all Android devices. BetterBarcodes takes care backwards compatibility so you don't have to worry about a thing!</li>
<li>
<strong>Extensive support of barcode formats</strong>: Read and display 1D or 2D barcodes in almost all common formats.</li>
<li>
<strong>No lag, no loading times</strong>: Uses the newest API and most efficient implementation to ensure the best possible performance and user experience.</li>
</ul>

<p><a href="https://travis-ci.org/Wrdlbrnft/BetterBarcodes"><img src="https://travis-ci.org/Wrdlbrnft/BetterBarcodes.svg?branch=master" alt="Build Status"></a></p>

<h2>
<a id="how-i-add-it-to-my-project" class="anchor" href="#how-i-add-it-to-my-project" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How I add it to my project?</h2>

<p>Just add this to the dependencies closure in your build.gradle:</p>

<div class="highlight highlight-source-groovy"><pre>compile <span class="pl-s"><span class="pl-pds">'</span>com.github.wrdlbrnft:better-barcodes:0.2.0.22<span class="pl-pds">'</span></span></pre></div>

<h2>
<a id="example-app" class="anchor" href="#example-app" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Example App</h2>

<p>There is an example app maintained for BetterBarcodes you can find it on GitHub <a href=""><strong>here</strong></a>.</p>

<p>Or if you just want to test the library you can download the example app from the Play Store:</p>

<p><a href="https://play.google.com/store/apps/details?id=com.github.wrdlbrnft.betterbarcodes.example.app"><img src="https://developer.android.com/images/brand/en_generic_rgb_wo_60.png" alt="Get it on Google Play"></a></p>

<h2>
<a id="features" class="anchor" href="#features" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Features</h2>

<p>BetterBarcodes includes two ready to use Views which you can add to your layout:</p>

<ul>
<li>
<code>BarcodeView</code>: Displays a barcode in one or many different formats.</li>
<li>
<code>BarcodeReaderView</code>: Reads a barcode by using the camera of the device.</li>
</ul>

<h3>
<a id="barcodereaderview" class="anchor" href="#barcodereaderview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>BarcodeReaderView</h3>

<h4>
<a id="basic-usage" class="anchor" href="#basic-usage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Basic usage</h4>

<p>The <code>BarcodeReaderView</code> can be used to read a barcode of a format of your choosing.</p>

<p>To use the <code>BarcodeReaderView</code> add it to your layout like this:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">com</span>.github.wrdlbrnft.betterbarcodes.views.reader.BarcodeReaderView
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>@+id/barcode_reader<span class="pl-pds">"</span></span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">layout_width</span>=<span class="pl-s"><span class="pl-pds">"</span>match_parent<span class="pl-pds">"</span></span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">layout_height</span>=<span class="pl-s"><span class="pl-pds">"</span>250dp<span class="pl-pds">"</span></span>
    <span class="pl-e">app</span><span class="pl-e">:</span><span class="pl-e">format</span>=<span class="pl-s"><span class="pl-pds">"</span>qr_code|code128<span class="pl-pds">"</span></span>/&gt;</pre></div>

<p>The custom attribute <code>format</code> can be used to set the barcode formats you want to read. You can also do that at runtime by using the <code>setFormat()</code> method:</p>

<div class="highlight highlight-source-java"><pre>barcodeReaderView<span class="pl-k">.</span>setFormat(<span class="pl-smi">BarcodeFormat</span><span class="pl-c1"><span class="pl-k">.</span>QR_CODE</span>, <span class="pl-smi">BarcodeFormat</span><span class="pl-c1"><span class="pl-k">.</span>CODE_128</span>);</pre></div>

<p>After that you need to start and stop the reading process by calling <code>start()</code> and <code>stop()</code>.</p>

<ul>
<li>
<code>start()</code>: Starts the camera preview and immediately starts looking any barcodes in the cameras field of view.</li>
<li>
<code>stop()</code>: Stops the camera preview and stops looking for barcodes.</li>
</ul>

<p>Usually you would call <code>start()</code> in <code>onResume()</code> and <code>stop()</code> in <code>onPause()</code>. It is not recommended to leave the camera running while your app is in the background.</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">@Override</span>
<span class="pl-k">public</span> <span class="pl-k">void</span> onResume() {
    <span class="pl-v">super</span><span class="pl-k">.</span>onResume();
    barcodeReaderView<span class="pl-k">.</span>start();
}

<span class="pl-k">@Override</span>
<span class="pl-k">public</span> <span class="pl-k">void</span> onPause() {
    <span class="pl-v">super</span><span class="pl-k">.</span>onPause();
    barcodeReaderView<span class="pl-k">.</span>stop();
}</pre></div>

<p>You can also independently control preview and scanning by calling <code>startPreview()</code> and <code>startScanning()</code> as well as <code>stopScanning()</code> and <code>stopPreview()</code>. However you cannot scan for barcodes without the preview running so calling <code>startScanning()</code> will also start the camera preview. In the same way <code>stopPreview()</code> will also stop scanning for barcodes.</p>

<h4>
<a id="runtime-permissions" class="anchor" href="#runtime-permissions" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Runtime Permissions</h4>

<p>On API levels 23 and above you need handle the runtime permission for the camera which the <code>BarcodeReaderView</code> has to use. There are two options:</p>

<ul>
<li>Either you can handle them entirely on your own. In that case you need to make sure that <code>start()</code> is only called once the permission has been granted</li>
<li>However the preferable option is to use the permission request logic which is built into the <code>BarcodeReaderView</code>! </li>
</ul>

<p>Using the built-in permission request logic is simple:</p>

<p>You have to set a <code>PermissionHandler</code> on the <code>BarcodeReaderView</code>. The <code>PermissionHandler</code> has callback methods to easily handle permission requests, show the permission rational when required and callbacks when the permission is granted or denied. To simplify implementing the <code>PermissionHandler</code> there is the <code>PermissionHandler.Adapter</code> class. The basic implementation - in this example in a <code>Fragment</code> - looks like this:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">private</span> <span class="pl-smi">PermissionRequest</span> mPermissionRequest;

<span class="pl-k">@Override</span>
<span class="pl-k">public</span> <span class="pl-k">void</span> onViewCreated(<span class="pl-smi">View</span> view, <span class="pl-k">@Nullable</span> <span class="pl-smi">Bundle</span> savedInstanceState) {
    <span class="pl-v">super</span><span class="pl-k">.</span>onViewCreated(view, savedInstanceState);
    barcodeReaderView<span class="pl-k">.</span>setCameraPermissionHandler(<span class="pl-k">new</span> <span class="pl-smi">PermissionHandler</span>.<span class="pl-smi">Adapter</span>() {
        <span class="pl-k">@Override</span>
        <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onNewPermissionRequest</span>(<span class="pl-smi">PermissionRequest</span> <span class="pl-v">request</span>) {
            mPermissionRequest <span class="pl-k">=</span> request;
            request<span class="pl-k">.</span>start(<span class="pl-smi">ExampleFragment</span><span class="pl-k">.</span><span class="pl-v">this</span>);
        }
    });
}

<span class="pl-k">@Override</span>
<span class="pl-k">public</span> <span class="pl-k">void</span> onRequestPermissionsResult(<span class="pl-k">int</span> requestCode, <span class="pl-k">@NonNull</span> <span class="pl-k">String</span>[] permissions, <span class="pl-k">@NonNull</span> <span class="pl-k">int</span>[] grantResults) {
    <span class="pl-v">super</span><span class="pl-k">.</span>onRequestPermissionsResult(requestCode, permissions, grantResults);
    mPermissionRequest<span class="pl-k">.</span>onRequestPermissionsResult(requestCode, permissions, grantResults);
}</pre></div>

<p>In the <code>onNewPermissionRequest()</code> method of the <code>PermissionHandler</code> you have to save the <code>PermissionRequest</code> instance that is passed in a field. By calling <code>start()</code> on the <code>PermissionRequest</code> with the current instance of your <code>Fragment</code> or <code>Activity</code> you start the actual permission request process. Later in the <code>onRequestPermissionsResult()</code> callback in your <code>Fragment</code> or <code>Activty</code> you have to call the method of the same name on the <code>PermissionRequest</code> and pass in the parameters. This implementation is enough to handle a complete request for the permission. However you can also override additional methods to show a rationale and to handle cases where the permission is granted or denied:</p>

<div class="highlight highlight-source-java"><pre>barcodeReaderView<span class="pl-k">.</span>setCameraPermissionHandler(<span class="pl-k">new</span> <span class="pl-smi">PermissionHandler</span>.<span class="pl-smi">Adapter</span>() {

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onNewPermissionRequest</span>(<span class="pl-smi">PermissionRequest</span> <span class="pl-v">request</span>) {
        mPermissionRequest <span class="pl-k">=</span> request;
        request<span class="pl-k">.</span>start(<span class="pl-smi">ReaderFragment</span><span class="pl-k">.</span><span class="pl-v">this</span>);
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">boolean</span> <span class="pl-en">onShowRationale</span>() {

        <span class="pl-k">final</span> <span class="pl-smi">AlertDialog</span> rationaleDialog <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-smi">AlertDialog</span>.<span class="pl-smi">Builder</span>(getContext())
                .setTitle(<span class="pl-smi">R</span><span class="pl-k">.</span>string<span class="pl-k">.</span>rationale_title)
                .setMessage(<span class="pl-smi">R</span><span class="pl-k">.</span>string<span class="pl-k">.</span>rationale_message)
                .setPositiveButton(<span class="pl-smi">android<span class="pl-k">.</span>R</span><span class="pl-k">.</span>string<span class="pl-k">.</span>ok, <span class="pl-k">new</span> <span class="pl-smi">DialogInterface</span>.<span class="pl-smi">OnClickListener</span>() {
                    <span class="pl-k">@Override</span>
                    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onClick</span>(<span class="pl-smi">DialogInterface</span> <span class="pl-v">dialogInterface</span>, <span class="pl-k">int</span> <span class="pl-v">button</span>) {
                        dialogInterface<span class="pl-k">.</span>dismiss();

                        <span class="pl-c">// Call this to continue the request process after showing your rationale in whatever way you want.</span>
                        mPermissionRequest<span class="pl-k">.</span>continueAfterRationale(<span class="pl-smi">ExampleFragment</span><span class="pl-k">.</span><span class="pl-v">this</span>);
                    }
                })
                .create();

        rationaleDialog<span class="pl-k">.</span>show();

        <span class="pl-c">// Return true here if you show a rationale</span>
        <span class="pl-k">return</span> <span class="pl-c1">true</span>;
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onPermissionGranted</span>() {
        <span class="pl-c">// Called when the permission is granted</span>
    }

    <span class="pl-k">@Override</span>
    <span class="pl-k">public</span> <span class="pl-k">void</span> <span class="pl-en">onPermissionDenied</span>() {
        <span class="pl-c">// Called when the permission is denied</span>
    }
});</pre></div>

<h3>
<a id="barcodeview" class="anchor" href="#barcodeview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>BarcodeView</h3>

<p>The <code>BarcodeView</code> can be used to display barcodes in one or more formats. How the barcodes are displayed on the screen is controlled by a <code>BarcodeLayoutManager</code> instance. BetterBarcodes comes with a few predefined, ready to use <code>BarcodeLayoutManagers</code>.</p>

<p>To use the <code>BarcodeView</code> add it to your layout like this:</p>

<div class="highlight highlight-text-xml"><pre>&lt;<span class="pl-ent">com</span>.github.wrdlbrnft.betterbarcodes.views.writer.BarcodeView
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">id</span>=<span class="pl-s"><span class="pl-pds">"</span>@+id/barcode_view<span class="pl-pds">"</span></span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">layout_width</span>=<span class="pl-s"><span class="pl-pds">"</span>match_parent<span class="pl-pds">"</span></span>
    <span class="pl-e">android</span><span class="pl-e">:</span><span class="pl-e">layout_height</span>=<span class="pl-s"><span class="pl-pds">"</span>250dp<span class="pl-pds">"</span></span>
    <span class="pl-e">app</span><span class="pl-e">:</span><span class="pl-e">format</span>=<span class="pl-s"><span class="pl-pds">"</span>qr_code|code128<span class="pl-pds">"</span></span>
    <span class="pl-e">app</span><span class="pl-e">:</span><span class="pl-e">text</span>=<span class="pl-s"><span class="pl-pds">"</span>@string/barcode_text<span class="pl-pds">"</span></span>&gt;</pre></div>

<p>The custom attribute <code>format</code> can be used to set the formats you want to display your barcode in. The custom attribute <code>text</code> is used to set the text the barcode should display, this can be a string or a string resource. </p>

<p>Of course you can also set both of those things at runtime:</p>

<div class="highlight highlight-source-java"><pre>barcodeView<span class="pl-k">.</span>setFormat(<span class="pl-smi">BarcodeFormat</span><span class="pl-c1"><span class="pl-k">.</span>QR_CODE</span>, <span class="pl-smi">BarcodeFormat</span><span class="pl-c1"><span class="pl-k">.</span>CODE_128</span>);
barcodeView<span class="pl-k">.</span>setText(<span class="pl-s"><span class="pl-pds">"</span>Some Text<span class="pl-pds">"</span></span>);</pre></div>

<p>Per default the <code>BarcodeView</code> uses the <code>HorizontalRotatingLayoutManager</code>. BetterBarcodes includes the following <code>BarcodeLayoutManager</code> implementations:</p>

<ul>
<li><code>SimpleVerticalBarcodeLayoutManager</code></li>
<li><code>LinearBarcodeLayoutManager</code></li>
<li><code>HorizontalRotatingLayoutManager</code></li>
</ul>

<p>If you want to use one of these you can set it using the <code>setLayoutManager()</code> method. Of course you can always implement your own <code>BarcodeLayoutManager</code>! To simplify this BetterBarcodes includes the <code>AbsBarcodeLayoutManager</code> class which you should use if you want to implement your own one.</p>

<h3>
<a id="usage-without-the-views" class="anchor" href="#usage-without-the-views" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Usage without the Views</h3>

<p>If you just want to create a barcode image without using the <code>BarcodeView</code> you can do that like this:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">final</span> <span class="pl-smi">BarcodeWriter</span> writer <span class="pl-k">=</span> <span class="pl-smi">BarcodeWriters</span><span class="pl-k">.</span>forFormat(<span class="pl-smi">BarcodeFormat</span><span class="pl-c1"><span class="pl-k">.</span>QR_CODE</span>);
<span class="pl-k">final</span> <span class="pl-smi">Bitmap</span> barcodeImage <span class="pl-k">=</span> writer<span class="pl-k">.</span>write(<span class="pl-s"><span class="pl-pds">"</span>Some Text<span class="pl-pds">"</span></span>, someWidth, someHeight);</pre></div>

<p>You can also read barcodes without using the <code>BarcodeReaderView</code>, however you need to use the <code>AspectRatioTextureView</code> which is also included in the BetterBarcodes library:</p>

<div class="highlight highlight-source-java"><pre><span class="pl-k">final</span> <span class="pl-smi">BarcodeReader</span> reader <span class="pl-k">=</span> <span class="pl-smi">BarcodeReaders</span><span class="pl-k">.</span>get(getContext(), aspectRatioTextureView);
reader<span class="pl-k">.</span>setFormat(<span class="pl-smi">BarcodeFormat</span><span class="pl-c1"><span class="pl-k">.</span>QR_CODE</span>, <span class="pl-smi">BarcodeFormat</span><span class="pl-c1"><span class="pl-k">.</span>CODE_128</span>);

reader<span class="pl-k">.</span>startPreview();
reader<span class="pl-k">.</span>startScanning();
<span class="pl-c1">...</span>
reader<span class="pl-k">.</span>stopScanning();
reader<span class="pl-k">.</span>stopPreview();</pre></div>

<p>The <code>BarcodeReader</code> object works in principle the same way as the <code>BarcodeReaderView</code> does - including the way you can handle runtime permissions.</p>

<h2>
<a id="based-on-zxing" class="anchor" href="#based-on-zxing" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Based on ZXing</h2>

<p>BetterBarcodes is using ZXing for encoding and decoding barcodes, check out their GitHub page <a href="https://github.com/zxing/zxing">here</a>.</p>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/Wrdlbrnft/BetterBarcodes">BetterBarcodes</a> is maintained by <a href="https://github.com/Wrdlbrnft">Wrdlbrnft</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
